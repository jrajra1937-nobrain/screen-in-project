<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<title>Screen In — QCM</title>

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#0b1020;
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
.panel{
  background:#121a33;
  padding:20px;
  border-radius:12px;
  width:90%;
  max-width:700px;
}
.screen{display:none;}
.screen.active{display:block;}
button{
  padding:10px 15px;
  margin-top:10px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
.primary{background:#6ea8fe;color:black;font-weight:bold;}
video{width:100%;border-radius:10px;}

.modalOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  display:none;
  justify-content:center;
  align-items:center;
}
.modalOverlay.active{display:flex;}
.modal{
  background:#121a33;
  padding:20px;
  border-radius:12px;
  max-width:400px;
}
</style>
</head>

<body>

<div class="panel">

<!-- INTRO -->
<section class="screen active" id="introScreen">
<h2>SCREEN IN</h2>
<p>Réponds au quiz avant d’accéder à la vidéo.</p>
<button class="primary" id="startBtn">Commencer</button>
</section>

<!-- QUIZ -->
<section class="screen" id="quizScreen">
<h3 id="questionText"></h3>
<div id="answers"></div>
<p id="explanation"></p>
<button id="nextBtn">Suivant</button>
</section>

<!-- RESULT -->
<section class="screen" id="resultScreen">
<h2>Résultat</h2>
<p id="finalScore"></p>
<button class="primary" id="toVideoBtn">Passer à la vidéo</button>
<button id="retryBtn">Refaire le quiz</button>
</section>

<!-- VIDEO -->
<section class="screen" id="videoScreen">
<h2>Vidéo</h2>
<video id="video" controls>
  <source src="project.mp4" type="video/mp4">
</video>
<br>
<button id="backToResultBtn">⛔ Retour</button>
<button id="restartFromVideoBtn">Retour au début</button>
</section>

</div>

<!-- WARNING MODAL -->
<div class="modalOverlay" id="videoWarnOverlay">
  <div class="modal">
    <h3>⚠️ Cette vidéo peut contenir des images choquantes</h3>
    <p>Veux-tu continuer ?</p>
    <button class="primary" id="confirmViewBtn">▶ Voir</button>
    <button id="cancelViewBtn">⛔ Retour</button>
  </div>
</div>

<script>
const QUIZ = [
 {text:"Pourquoi les images de guerre deviennent banales ?",choices:["On s’habitue","C’est faux","C’est drôle","On ne voit rien"],good:0},
 {text:"Que fait-on souvent après une vidéo choquante ?",choices:["On réfléchit","On scrolle","On agit","On pleure"],good:1}
];

let state={index:0,score:0};

const introScreen=document.getElementById("introScreen");
const quizScreen=document.getElementById("quizScreen");
const resultScreen=document.getElementById("resultScreen");
const videoScreen=document.getElementById("videoScreen");

const questionText=document.getElementById("questionText");
const answers=document.getElementById("answers");
const explanation=document.getElementById("explanation");

const startBtn=document.getElementById("startBtn");
const nextBtn=document.getElementById("nextBtn");
const retryBtn=document.getElementById("retryBtn");
const toVideoBtn=document.getElementById("toVideoBtn");

const backToResultBtn=document.getElementById("backToResultBtn");
const restartFromVideoBtn=document.getElementById("restartFromVideoBtn");
const videoEl=document.getElementById("video");

const videoWarnOverlay=document.getElementById("videoWarnOverlay");
const confirmViewBtn=document.getElementById("confirmViewBtn");
const cancelViewBtn=document.getElementById("cancelViewBtn");

function show(screen){
 [introScreen,quizScreen,resultScreen,videoScreen].forEach(s=>s.classList.remove("active"));
 screen.classList.add("active");
}

function renderQuestion(){
 const q=QUIZ[state.index];
 questionText.textContent=q.text;
 answers.innerHTML="";
 explanation.textContent="";
 q.choices.forEach((c,i)=>{
   const btn=document.createElement("button");
   btn.textContent=c;
   btn.onclick=()=>{
     if(i===q.good) state.score++;
     explanation.textContent="Question suivante...";
   };
   answers.appendChild(btn);
 });
}

startBtn.onclick=()=>{
 show(quizScreen);
 renderQuestion();
};

nextBtn.onclick=()=>{
 state.index++;
 if(state.index<QUIZ.length){
   renderQuestion();
 }else{
   finalScore.textContent=`Score : ${state.score}/${QUIZ.length}`;
   show(resultScreen);
 }
};

retryBtn.onclick=()=>{
 state.index=0;
 state.score=0;
 show(quizScreen);
 renderQuestion();
};

toVideoBtn.onclick=()=>{
 videoWarnOverlay.classList.add("active");
};

confirmViewBtn.onclick=()=>{
 videoWarnOverlay.classList.remove("active");
 show(videoScreen);
};

cancelViewBtn.onclick=()=>{
 videoWarnOverlay.classList.remove("active");
 show(resultScreen);
};

backToResultBtn.onclick=()=>{
 videoEl.pause();
 videoEl.currentTime=0;
 show(resultScreen);
};

restartFromVideoBtn.onclick=()=>{
 videoEl.pause();
 videoEl.currentTime=0;
 state.index=0;
 state.score=0;
 show(introScreen);
};
</script>

</body>
</html>
